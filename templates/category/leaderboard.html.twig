{% extends 'base.html.twig' %}

{% block stylesheets %}
    <style>

        .leaderboard-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:30px;
        }

        .leaderboard-title{
            font-size:2rem;
            font-weight:700;
        }

        .leaderboard-subtitle{
            color:var(--text-secondary);
            font-size:14px;
        }

        .btn-back{
            border:1px solid var(--border-color);
            background:transparent;
            color:var(--text-secondary);
            padding:6px 12px;
            border-radius:8px;
            text-decoration:none;
            font-size:14px;
        }

        .btn-back:hover{
            color:var(--text-main);
            border-color:var(--accent);
        }

        .podium{
            display:flex;
            justify-content:center;
            gap:30px;
            margin-bottom:40px;
        }

        .podium-card{
            text-align:center;
        }

        .podium-card img{
            width:110px;
            border-radius:8px;
            margin-bottom:8px;
        }

        .first img{
            box-shadow:0 0 12px gold;
        }

        .second img{
            box-shadow:0 0 10px silver;
        }

        .third img{
            box-shadow:0 0 10px #cd7f32;
        }

        .rank-label{
            font-weight:700;
            font-size:14px;
            margin-bottom:4px;
        }

        .movie-name{
            font-size:14px;
            margin-bottom:2px;
        }

        .movie-stats{
            font-size:12px;
            color:var(--text-secondary);
        }

        .leaderboard-list{
            display:flex;
            flex-direction:column;
            gap:10px;
        }

        .list-item{
            display:flex;
            align-items:center;
            gap:12px;
            background:var(--bg-card);
            padding:8px;
            border-radius:8px;
        }

        .list-rank{
            width:30px;
            font-weight:700;
            color:var(--accent);
        }

        .list-item img{
            width:45px;
            border-radius:6px;
        }

        .list-info{
            flex:1;
        }

        .list-title{
            font-size:14px;
        }

        .list-meta{
            font-size:12px;
            color:var(--text-secondary);
        }

    </style>
{% endblock %}

{% block body %}

    <div class="leaderboard-header">

        <div>

            <div class="leaderboard-title">
                {{ category.name }}
            </div>

            <div class="leaderboard-subtitle">
                {{ totalParticipants }} participantes
            </div>

        </div>

        <a href="{{ path('public_category_show',{id:category.id}) }}"
           class="btn-back">
            ‚Üê Volver
        </a>

    </div>

    {% if leaderboard|length >= 3 %}

        <div class="podium">

            <div class="podium-card second">

                <img src="https://image.tmdb.org/t/p/w500{{ leaderboard[1].poster_path }}">

                <div class="rank-label">ü•à #2</div>

                <div class="movie-name">
                    {{ leaderboard[1].title }}
                </div>

                <div class="movie-stats">
                    {{ leaderboard[1].avg_position|number_format(2) }}
                </div>

            </div>

            <div class="podium-card first">

                <img src="https://image.tmdb.org/t/p/w500{{ leaderboard[0].poster_path }}">

                <div class="rank-label">ü•á #1</div>

                <div class="movie-name">
                    {{ leaderboard[0].title }}
                </div>

                <div class="movie-stats">
                    {{ leaderboard[0].avg_position|number_format(2) }}
                </div>

            </div>

            <div class="podium-card third">

                <img src="https://image.tmdb.org/t/p/w500{{ leaderboard[2].poster_path }}">

                <div class="rank-label">ü•â #3</div>

                <div class="movie-name">
                    {{ leaderboard[2].title }}
                </div>

                <div class="movie-stats">
                    {{ leaderboard[2].avg_position|number_format(2) }}
                </div>

            </div>

        </div>

    {% endif %}

    <div class="leaderboard-list">

        {% for movie in leaderboard %}

            {% if loop.index > 3 %}

                <div class="list-item">

                    <div class="list-rank">
                        #{{ loop.index }}
                    </div>

                    <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}">

                    <div class="list-info">

                        <div class="list-title">
                            {{ movie.title }}
                        </div>

                        <div class="list-meta">
                            Media: {{ movie.avg_position|number_format(2) }} ‚Ä¢
                            Votos: {{ movie.total_votes }}
                        </div>

                    </div>

                </div>

            {% endif %}

        {% endfor %}

    </div>

{% endblock %}
