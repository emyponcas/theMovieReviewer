{% extends 'base.html.twig' %}

{% block body %}

    <div class="container mt-4">

        <div class="d-flex justify-content-between align-items-center mb-4">

            <div>

                <h1>{{ category.name }}</h1>

                <p class="text-muted">
                    {{ totalParticipants }} participantes han votado
                </p>

            </div>

            <a href="{{ path('public_category_show', {id: category.id}) }}"
               class="btn btn-outline-light">

                Volver a ranking

            </a>

        </div>


        <div class="row">

            {% for movie in leaderboard %}

                <div class="col-md-3 mb-4">

                    <div class="leaderboard-card">

                        <div class="position-badge
{% if loop.index == 1 %}gold
{% elseif loop.index == 2 %}silver
{% elseif loop.index == 3 %}bronze
{% endif %}
">

                            #{{ loop.index }}

                        </div>

                        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}">

                        <div class="card-body">

                            <h5>{{ movie.title }}</h5>

                            <div class="stats">

                                <div>
                                    Media posici√≥n
                                    <br>
                                    <strong>{{ movie.avg_position|number_format(2) }}</strong>
                                </div>

                                <div>
                                    Votos
                                    <br>
                                    <strong>{{ movie.total_votes }}</strong>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            {% endfor %}

        </div>

    </div>


    <style>

        .leaderboard-card {

            background: linear-gradient(145deg,#1e1e2f,#2a2a40);
            border-radius:12px;
            overflow:hidden;
            transition:0.3s;
            position:relative;

        }

        .leaderboard-card:hover {

            transform:translateY(-6px);
            box-shadow:0 12px 30px rgba(0,0,0,0.6);

        }

        .leaderboard-card img {

            width:100%;
            height:350px;
            object-fit:cover;

        }

        .card-body {

            padding:15px;
            color:white;

        }

        .stats {

            display:flex;
            justify-content:space-between;
            margin-top:10px;
            font-size:14px;
            color:#ccc;

        }

        .position-badge {

            position:absolute;
            top:10px;
            left:10px;
            padding:6px 12px;
            border-radius:8px;
            font-weight:bold;

        }

        .gold {

            background:#FFD700;
            color:black;

        }

        .silver {

            background:#C0C0C0;
            color:black;

        }

        .bronze {

            background:#CD7F32;
            color:black;

        }

    </style>

{% endblock %}
