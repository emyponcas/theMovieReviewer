<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}theMovieReviewer{% endblock %}</title>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ðŸŽ¬</text></svg>">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons@7.2.1/css/flag-icons.min.css">


    <style>

        :root {
            --bg-main: #0f172a;
            --bg-secondary: #111827;
            --bg-card: #1f2937;
            --bg-hover: #374151;

            --text-main: #f9fafb;
            --text-secondary: #9ca3af;

            --accent: #facc15;
            --accent-hover: #eab308;

            --border-color: #374151;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
        }

        main {
            flex: 1;
        }

        .navbar {
            background-color: rgba(17, 24, 39, 0.85);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }

        .navbar-brand {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--accent) !important;
            letter-spacing: 0.5px;
        }

        .nav-link {
            color: var(--text-secondary) !important;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .nav-link:hover {
            color: var(--text-main) !important;
        }

        .nav-link.active {
            color: var(--accent) !important;
        }

        .btn-accent {
            background-color: var(--accent);
            color: black;
            font-weight: 600;
            border-radius: 8px;
            padding: 6px 14px;
            border: none;
            transition: all 0.2s ease;
        }

        .btn-accent:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }

        .dropdown-menu {
            background-color: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
        }

        .dropdown-item {
            color: var(--text-secondary);
        }

        .dropdown-item:hover {
            background-color: var(--bg-hover);
            color: var(--text-main);
        }

        .dropdown-divider {
            border-color: var(--border-color);
        }

        .container-main {
            max-width: 1300px;
        }

        .footer {
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .alert {
            border-radius: 10px;
        }

    </style>

    {% block stylesheets %}{% endblock %}

</head>

<body>

<nav class="navbar navbar-expand-lg shadow-sm">

    <div class="container container-main">

        <a class="navbar-brand" href="{{ path('app_home') }}">
            theMovieReviewer
        </a>

        <button class="navbar-toggler text-white"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarNav">

            <i class="fas fa-bars"></i>

        </button>

        <div class="collapse navbar-collapse" id="navbarNav">

            <ul class="navbar-nav me-auto">

                <li class="nav-item">
                    <a class="nav-link"
                       href="{{ path('app_home') }}">
                        Inicio
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link"
                       href="{{ path('app_movie') }}">
                        PelÃ­culas
                    </a>
                </li>

                {% if app.user %}

                    <li class="nav-item">
                        <a class="nav-link"
                           href="{{ path('app_user_reviews') }}">
                            Mis reviews
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link"
                           href="{{ path('public_category_index') }}">
                            CategorÃ­as
                        </a>
                    </li>

                {% endif %}

                {% if is_granted('ROLE_ADMIN') %}

                    <li class="nav-item">
                        <a class="nav-link"
                           href="{{ path('admin_site') }}">
                            Admin
                        </a>
                    </li>

                {% endif %}

            </ul>

            <ul class="navbar-nav ms-auto align-items-center">

                {% if app.user %}

                    <li class="nav-item dropdown">

                        <a class="nav-link dropdown-toggle"
                           href="#"
                           data-bs-toggle="dropdown">

                            {{ app.user.email }}

                        </a>

                        <ul class="dropdown-menu dropdown-menu-end">

                            <li>
<span class="dropdown-item-text">
{{ app.user.email }}
</span>
                            </li>

                            <li><hr class="dropdown-divider"></li>

                            <li>
                                <a class="dropdown-item"
                                   href="{{ path('app_user_reviews') }}">
                                    Mis reviews
                                </a>
                            </li>

                            <li>
                                <a class="dropdown-item text-danger"
                                   href="{{ path('app_logout') }}">
                                    Logout
                                </a>
                            </li>

                        </ul>

                    </li>

                {% else %}

                    <li class="nav-item me-2">
                        <a class="nav-link"
                           href="{{ path('app_login') }}">
                            Login
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="btn-accent"
                           href="{{ path('app_register') }}">
                            Register
                        </a>
                    </li>

                {% endif %}

            </ul>

        </div>

    </div>

</nav>

<main class="py-4">

    <div class="container container-main">

        {% for label, messages in app.flashes %}

            {% for message in messages %}

                <div class="alert alert-{{ label }} alert-dismissible fade show">

                    {{ message }}

                    <button type="button"
                            class="btn-close"
                            data-bs-dismiss="alert">
                    </button>

                </div>

            {% endfor %}

        {% endfor %}

        {% block body %}{% endblock %}

    </div>

</main>

<footer class="footer py-4 mt-5">

    <div class="container container-main text-center">

        <div class="mb-1 fw-semibold">
            theMovieReviewer
        </div>

        <small>
            Â© {{ "now"|date("Y") }}
        </small>

    </div>

</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

{% block javascripts %}{% endblock %}

</body>
</html>
